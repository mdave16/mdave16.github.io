---
layout: default
title: ChatBot
---

<table id="chatlog">
  <thead>
    <tr>
      <th>Name</th>
      <th>Speech</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><p id="userName"></p></td>
      <td>
        <input type="text" placeholder="Say something!" id="userSpeech" />
      </td>
    </tr>
  </tbody>
</table>

<script>
  const speak = (name, comm) => {
    const table = document.getElementById("chatlog")
    const newRow = table.insertRow(table.rows.length - 1)
    const newName = newRow.insertCell(0)
    const newComment = newRow.insertCell(1)
    newName.innerHTML = name
    newComment.innerHTML = comm
  }

  let userName = "User"

  const setUserName = name => {
    userName = name
    document.getElementById("userName").innerHTML = name
  }

  setUserName("User")

  function chatBot(name) {
    this.name = name
    this.respond = function(inp) {
      if (inp.toLowerCase().startsWith("my name is")) {
        let name = inp.split(" ")[3]
        setUserName(name)
        speak(this.name, "Nice to meet you " + name + ".")
      } else {
        speak(this.name, inp + " to you too!")
      }
    }
  }

  const Chatty = new chatBot("Chatty")
  speak("Chatty", "Hi! I'm your chatBot")

  const input = document.getElementById("userSpeech")
  input.addEventListener("keyup", function(event) {
    if (event.key === "Enter") {
      const comm = event.target.value
      input.value = ""
      speak(userName, comm)
      Chatty.respond(comm)
    }
  })
</script>
